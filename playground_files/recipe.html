<div class="recipe-container">

    <!-- Recipe Header -->
    <div class="recipe-header">
      <div class="concept-row">
        {% if recipe.concepts|length == 1 %}
          {% if recipe.concepts[0].photo_url %}
            <div class="concept-icon concept-icon-photo"
                 style="background-image: url('{{ recipe.concepts[0].photo_url }}');"></div>
          {% else %}
            <div class="concept-icon concept-icon-initials">{{ recipe.concepts[0].name[:2].upper() }}</div>
          {% endif %}
          <div class="body-print">{{ recipe.concepts[0].name }}</div>
        {% elif recipe.concepts|length == 2 %}
          {% if recipe.concepts[0].photo_url %}
            <div class="concept-icon concept-icon-photo"
                 style="background-image: url('{{ recipe.concepts[0].photo_url }}');"></div>
          {% else %}
            <div class="concept-icon concept-icon-initials">{{ recipe.concepts[0].name[:2].upper() }}</div>
          {% endif %}
          {% if recipe.concepts[1].photo_url %}
            <div class="concept-icon concept-icon-photo"
                 style="background-image: url('{{ recipe.concepts[1].photo_url }}');"></div>
          {% else %}
            <div class="concept-icon concept-icon-initials">{{ recipe.concepts[1].name[:2].upper() }}</div>
          {% endif %}
          <div class="body-print">{{ recipe.concepts[0].name }} + 1 more</div>
        {% elif recipe.concepts|length > 2 %}
          {% if recipe.concepts[0].photo_url %}
            <div class="concept-icon concept-icon-photo"
                 style="background-image: url('{{ recipe.concepts[0].photo_url }}');"></div>
          {% else %}
            <div class="concept-icon concept-icon-initials">{{ recipe.concepts[0].name[:2].upper() }}</div>
          {% endif %}
          <div class="concept-icon concept-icon-plus">+{{ recipe.concepts|length - 1 }}</div>
          <div class="body-print">{{ recipe.concepts[0].name }} + {{ recipe.concepts|length - 1 }} more</div>
        {% endif %}
      </div>
      <span class="vertical-spacer-sm"></span>
      <div class="headline-print">{{ recipe.name }}</div>
    </div>
  
    <!-- Recipe Image Details -->
    <div class="recipe-image-details-section">
      <!-- Recipe Details -->
      <div class="recipe-image-details-col">
        <div class="batch-size">
          <span class="body-bold-print">Batch Size:</span>
          <span class="body-spacer"> </span>
          <span class="body-print">{{ recipe.batch_size }}x</span>
        </div>
        <div class="yield">
          <span class="body-bold-print">Yield:</span>
          <span class="body-spacer"> </span>
          <span class="body-print">{% if recipe.yield_data %}{% if recipe.yield_data.total_efficiency_str %}
            {{ recipe.yield_data.total_efficiency_str }}{% endif %} {% if recipe.yield_data.unit_of_measure_name %}
            {{ recipe.yield_data.unit_of_measure_name }}{% endif %}{% endif %}</span>
        </div>
        <div class="shelf-life">
          <span class="body-bold-print">Shelf Life:</span>
          <span class="body-spacer"> </span>
          <span class="body-print">{% if recipe.shelf_life_data.shelf_life_str %}
            {{ recipe.shelf_life_data.shelf_life_str }}
            {{ recipe.shelf_life_data.unit_of_measure_name }}{% endif %}</span>
        </div>
      </div>
      <!-- Recipe Details -->
      <div class="recipe-image-details-col" style="text-align: right;">
        <!-- Recipe Image -->
        {% if recipe.media %}
          <img class="recipe-image"
               src="{{ recipe.media.path }}"
               alt="No image to display"
               data-debug="recipe-media-image"/>
          <span class="vertical-spacer-lg"></span>
        {% endif %}
      </div>
    </div>
  
    <!-- Ingredients -->
    <div class="section-container">
  
      <!-- Ingredients Header -->
      <div class="section-header">
        <div class="title-print">Ingredients</div>
      </div>
  
      <!-- Ingredients Content -->
      {% for item in recipe.recipe_items %}
        <div class="recipe-items-content">
          {% if item.is_header %}
            <div class="item-header body-bold-print">{{ item.name }}</div>
          {% elif item.is_note %}
            <div class="item-note body-light-print">{{ item.name|safe }}</div>
          {% else %}
            <div class="recipe-item-content">
              <span class="recipe-item-bullet body-print">•</span>
              <span class="body-print">{{ item.primary_quantity }} {{ item.primary_unit_of_measure_name }}
                {% if item.secondary_quantity %} + {{ item.secondary_quantity }}
                  {{ item.secondary_unit_of_measure_name }}{% endif %} {{ item.name }}</span>
              {% if item.preparation_note %}
                <span class="body-light-print">{{ item.preparation_note }}</span>
              {% endif %}
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  
    <!-- Prep Method -->
    <div class="section-container">
  
      <!-- Prep Method Header -->
      <div class="section-header">
        <div class="title-print">Prep Method</div>
      </div>
  
      <!-- Prep Method Steps -->
      {% set ns = namespace(step_counter=0) %}
      {% for step in recipe.steps %}
        <div class="prep-method-content">
          {% if step.is_header %}
            <div class="step-header body-bold-print">{{ step.description }}</div>
          {% elif step.is_note %}
            <div class="step-note body-light-print">{{ step.description|safe }}</div>
          {% else %}
            {% set ns.step_counter = ns.step_counter + 1 %}
            <div class="step-content">
              <span class="body-print"
                    style="text-transform: capitalize;">{{ ns.step_counter }}. {{ step.description }}</span>
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  
    <!-- Tag/Station -->
    <div class="section-container">
  
      <!-- Tag/Station Content -->
      <div class="tag-content">
        <div class="recipe-footer">
          {% if recipe.tags %}
            <div>
              <span class="body-bold-print">Tags: </span>
              {% for tag in recipe.tags %}
                <span class="body-print">{{ tag.name }}{% if not loop.last %} • {% endif %}</span>
              {% endfor %}
            </div>
            <span class="vertical-spacer-lg"></span>
          {% endif %}
          {% if recipe.stations %}
            <div>
              <span class="body-bold-print">Station: </span>
              {% for station in recipe.stations %}
                <span class="body-print">{{ station.name }}{% if not loop.last %} • {% endif %}</span>
              {% endfor %}
            </div>
            <span class="vertical-spacer-lg"></span>
          {% endif %}
        </div>
      </div>
  
    </div>
  
    <!-- Footer -->
    <div class="meez-logo-content">
      <div class="meez-logo-container">
        <div class="meez-logo">
          <div class="meez-logo-bars">
            <div class="meez-logo-bar meez-logo-bar-1"></div>
            <div class="meez-logo-bar meez-logo-bar-2"></div>
            <div class="meez-logo-bar meez-logo-bar-3"></div>
          </div>
          <div class="meez-logo-text">meez</div>
        </div>
      </div>
    </div>
  
  </div>
  