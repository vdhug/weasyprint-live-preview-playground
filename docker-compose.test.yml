version: '3.8'

services:
  weasyprint-test:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: weasyprint-sandbox-test
    volumes:
      # Mount code for real-time test execution
      - ./app:/app/app
      - ./tests:/app/tests
      - ./server.py:/app/server.py
      - ./playground_files:/app/playground_files
    environment:
      - PYTHONUNBUFFERED=1
      - CONFIG_ENV=test
    # Don't start the server, just keep container alive for test execution
    command: tail -f /dev/null

